# =====================================================
# 🧩 NovaEdge Blog - Hugo 主配置文件（PaperMod + Cloudflare Pages）
# 作者：NovaEdge Team ｜ https://novaedge.vip/
# =====================================================

baseURL = "https://novaedge.vip/"
languageCode = "zh-cn"
title = "NovaEdge Blog"
theme = "PaperMod"

# =====================================================
# 🚀 基础构建选项
# =====================================================
enableRobotsTXT = true
buildDrafts = false
buildFuture = false
buildExpired = false
canonifyURLs = true        # 强制绝对路径，防止 /images 加载出错
relativeURLs = false       # 禁止相对路径，否则 Cloudflare 可能错乱
publishDir = "public"
enableGitInfo = true
defaultContentLanguage = "zh"

# Hugo v0.152+ 新分页写法
[pagination]
  pagerSize = 6

# =====================================================
# ✨ 站点信息与外观
# =====================================================
[params]
  title = "NovaEdge Blog"
  description = "技术、AI 与边缘计算的前沿笔记"
  keywords = ["AI", "Hugo", "Cloudflare", "PaperMod", "边缘计算"]
  author = "NovaEdge Team"
  defaultTheme = "dark"
  disableThemeToggle = false
  DateFormat = "2006-01-02"

  # ======= 页面展示元素 =======
  ShowReadingTime = true
  ShowShareButtons = true
  ShowPostNavLinks = true
  ShowCodeCopyButtons = true
  ShowBreadCrumbs = true
  ShowToc = true
  comments = false

  # ======= 首页卡片信息 =======
  [params.homeInfoParams]
    Title = "👋 欢迎来到 NovaEdge"
    Content = "记录前沿技术、AI 创意与云边计算探索。"

  # ======= 搜索配置 =======
  [params.search]
    enable = true
    provider = "local"        # 使用 Hugo 生成本地搜索索引
    indexURL = "/index.json"  # 关键：生成 index.json
    placeholder = "搜索文章..."
    fuse = true               # 使用 Fuse.js 进行本地模糊搜索

  # ======= 封面图与图像行为 =======
  [params.cover]
    linkFullImages = true
    hidden = false
    responsive = true

# =====================================================
# 📁 URL 与目录结构
# =====================================================
[permalinks]
  posts = "/posts/:slug/"
  categories = "/categories/:slug/"
  tags = "/tags/:slug/"

# =====================================================
# 🧱 顶部菜单
# =====================================================
[menu]
  [[menu.main]]
    identifier = "home"
    name = "首页"
    url = "/"
    weight = 1

  [[menu.main]]
    identifier = "posts"
    name = "文章"
    url = "/posts/"
    weight = 2

  [[menu.main]]
    identifier = "categories"
    name = "分类"
    url = "/categories/"
    weight = 3

  [[menu.main]]
    identifier = "tags"
    name = "标签"
    url = "/tags/"
    weight = 4

  [[menu.main]]
    identifier = "about"
    name = "关于"
    url = "/about/"
    weight = 5

# =====================================================
# 🌍 Markdown 渲染（允许 HTML）
# =====================================================
[markup]
  [markup.goldmark]
    [markup.goldmark.renderer]
      unsafe = true
    [markup.goldmark.extensions]
      typographer = true
      definitionList = true
      footnote = true
      linkify = true
      table = true
      taskList = true
      strikethrough = true

# =====================================================
# ⚡ 搜索与索引（核心配置）
# =====================================================
[outputs]
  home = ["HTML", "RSS", "JSON"]   # 生成 index.json，供搜索使用
  page = ["HTML"]
  section = ["HTML", "RSS"]
  taxonomy = ["HTML", "RSS"]
  term = ["HTML", "RSS"]
  search = ["HTML"]
# =====================================================
# 🧩 部署与性能优化
# =====================================================
[minify]
  disableXML = true
  minifyOutput = true

[build]
  writeStats = false

# =====================================================
# 🌐 Cloudflare Pages 兼容优化
# =====================================================
[mediaTypes."application/json"]
  suffixes = ["json"]

[outputFormats.JSON]
  mediaType = "application/json"
  baseName = "index"
  isPlainText = false
  notAlternative = true
